(function(e,t){"object"===typeof exports&&"object"===typeof module?module.exports=t(require("CoreHome"),require("vue"),require("CorePluginsAdmin")):"function"===typeof define&&define.amd?define(["CoreHome",,"CorePluginsAdmin"],t):"object"===typeof exports?exports["CustomAlerts"]=t(require("CoreHome"),require("vue"),require("CorePluginsAdmin")):e["CustomAlerts"]=t(e["CoreHome"],e["Vue"],e["CorePluginsAdmin"])})("undefined"!==typeof self?self:this,(function(e,t,r){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var l=t[n]={i:n,l:!1,exports:{}};return e[n].call(l.exports,l,l.exports,r),l.l=!0,l.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var l in e)r.d(n,l,function(t){return e[t]}.bind(null,l));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="plugins/CustomAlerts/vue/dist/",r(r.s="fae3")}({"19dc":function(t,r){t.exports=e},"8bbf":function(e,r){e.exports=t},a5a2:function(e,t){e.exports=r},fae3:function(e,t,r){"use strict";if(r.r(t),r.d(t,"ListAlerts",(function(){return x})),r.d(t,"EditAlert",(function(){return ie})),r.d(t,"HistoryTriggeredAlerts",(function(){return be})),r.d(t,"ListAlertsPage",(function(){return Ae})),"undefined"!==typeof window){var n=window.document.currentScript,l=n&&n.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);l&&(r.p=l[1])}var o=r("8bbf"),a={key:0},i={colspan:"6"},c=Object(o["createElementVNode"])("br",null,null,-1),u=Object(o["createElementVNode"])("br",null,null,-1),s=Object(o["createElementVNode"])("br",null,null,-1),d={class:"name"},m={class:"site"},p={class:"period"},b={class:"reportName"},O={class:"edit"},j=["href","title"],f=Object(o["createElementVNode"])("span",{class:"icon-edit"},null,-1),h=[f],v={class:"delete"},A=["onClick","id","title"],V=Object(o["createElementVNode"])("span",{class:"icon-delete"},null,-1),g=[V],y={class:"tableActionBar"},N=["href"],C=Object(o["createElementVNode"])("span",{class:"icon-add"},null,-1),_=["href"],E=Object(o["createElementVNode"])("span",{class:"icon-table"},null,-1);function S(e,t,r,n,l,f){var V,S=Object(o["resolveDirective"])("content-table");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",null,[Object(o["withDirectives"])(Object(o["createElementVNode"])("table",null,[Object(o["createElementVNode"])("thead",null,[Object(o["createElementVNode"])("tr",null,[Object(o["createElementVNode"])("th",null,Object(o["toDisplayString"])(e.translate("General_Name")),1),Object(o["createElementVNode"])("th",null,Object(o["toDisplayString"])(e.translate("General_Website")),1),Object(o["createElementVNode"])("th",null,Object(o["toDisplayString"])(e.translate("General_Period")),1),Object(o["createElementVNode"])("th",null,Object(o["toDisplayString"])(e.translate("General_Report")),1),Object(o["createElementVNode"])("th",null,Object(o["toDisplayString"])(e.translate("General_Edit")),1),Object(o["createElementVNode"])("th",null,Object(o["toDisplayString"])(e.translate("General_Delete")),1)])]),Object(o["createElementVNode"])("tbody",null,[null!==(V=e.alerts)&&void 0!==V&&V.length?Object(o["createCommentVNode"])("",!0):(Object(o["openBlock"])(),Object(o["createElementBlock"])("tr",a,[Object(o["createElementVNode"])("td",i,[c,Object(o["createTextVNode"])(" "+Object(o["toDisplayString"])(e.translate("CustomAlerts_NoAlertsDefined"))+" ",1),u,s])])),(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(e.alerts,(function(t){return Object(o["openBlock"])(),Object(o["createElementBlock"])("tr",{key:t.idalert},[Object(o["createElementVNode"])("td",d,Object(o["toDisplayString"])(t.name),1),Object(o["createElementVNode"])("td",m,Object(o["toDisplayString"])(e.decode(t.siteName)),1),Object(o["createElementVNode"])("td",p,Object(o["toDisplayString"])(e.ucfirst(e.translate("Intl_Period".concat(e.ucfirst(t.period))))),1),Object(o["createElementVNode"])("td",b,Object(o["toDisplayString"])(t.reportName||"-"),1),Object(o["createElementVNode"])("td",O,[Object(o["createElementVNode"])("a",{class:"table-action",href:e.linkTo({module:"CustomAlerts",action:"editAlert",idAlert:t.idalert}),title:e.translate("General_Edit")},h,8,j)]),Object(o["createElementVNode"])("td",v,[Object(o["createElementVNode"])("button",{class:"deleteAlert table-action",onClick:function(r){return e.deleteAlert(t.idalert)},id:t.idalert,title:e.translate("General_Delete")},g,8,A)])])})),128))])],512),[[S]]),Object(o["createElementVNode"])("div",y,[Object(o["createElementVNode"])("a",{href:e.linkTo({module:"CustomAlerts",action:"addNewAlert"})},[C,Object(o["createTextVNode"])(" "+Object(o["toDisplayString"])(e.translate("CustomAlerts_CreateNewAlert")),1)],8,N),Object(o["createElementVNode"])("a",{href:e.linkTo({module:"CustomAlerts",action:"historyTriggeredAlerts"})},[E,Object(o["createTextVNode"])(" "+Object(o["toDisplayString"])(e.translate("CustomAlerts_AlertsHistory")),1)],8,_)])])}var M=r("19dc"),k=Object(o["defineComponent"])({props:{alerts:{type:Array,default:function(){return[]}}},directives:{ContentTable:M["ContentTable"]},methods:{deleteAlert:function(e){M["Matomo"].helper.modalConfirm("#confirm",{yes:function(){M["AjaxHelper"].fetch({method:"CustomAlerts.deleteAlert",idAlert:e}).then((function(){M["Matomo"].helper.redirect()}))}})},ucfirst:function(e){return"".concat(e[0].toUpperCase()).concat(e.substr(1))},linkTo:function(e){return"?".concat(M["MatomoUrl"].stringify(Object.assign(Object.assign({},M["MatomoUrl"].urlParsed.value),e)))},decode:function(e){return M["Matomo"].helper.htmlDecode(e)}}});k.render=S;var x=k,D={id:"customAlertPeriodHelp",class:"inline-help-node"},B={key:0},T={key:1,class:"row"},w={class:"col s12"},R=Object(o["createTextVNode"])(": "),P=["innerHTML"],L={class:"row"},U={class:"col s12"},q={class:"row conditionAndValue"},H={class:"col s12 m6"},I={class:"col s12 m6"},G={class:"ui-autocomplete-input",ref:"reportValue"},F={class:"row conditionAndValue"},$={class:"col s12 m6"},W={class:"col s12 m6"},z=["innerHTML"];function Y(e,t,r,n,l,a){var i=Object(o["resolveComponent"])("Field"),c=Object(o["resolveComponent"])("SelectPhoneNumbers"),u=Object(o["resolveComponent"])("Alert"),s=Object(o["resolveComponent"])("ActivityIndicator"),d=Object(o["resolveComponent"])("SaveButton"),m=Object(o["resolveComponent"])("ContentBlock"),p=Object(o["resolveDirective"])("form");return Object(o["openBlock"])(),Object(o["createBlock"])(m,{class:"alerts","content-title":e.headline},{default:Object(o["withCtx"])((function(){var r,n,l;return[Object(o["withDirectives"])(Object(o["createElementVNode"])("div",null,[Object(o["createElementVNode"])("div",null,[Object(o["createVNode"])(i,{uicontrol:"text",name:"alertName",modelValue:e.actualAlert.name,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.actualAlert.name=t}),maxlength:100,title:e.translate("CustomAlerts_AlertName")},null,8,["modelValue","title"])]),Object(o["createElementVNode"])("div",null,[Object(o["createVNode"])(i,{uicontrol:"site",name:"idSite","model-value":{id:null===(r=e.actualAlert.id_sites)||void 0===r?void 0:r[0],name:e.actualCurrentSite.name},"onUpdate:modelValue":t[1]||(t[1]=function(t){e.actualAlert.id_sites=[t.id],e.actualCurrentSite=t,e.changeReport()}),title:e.translate("General_Website"),introduction:e.translate("CustomAlerts_ApplyTo")},null,8,["model-value","title","introduction"])]),Object(o["createElementVNode"])("div",D,[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.translate("CustomAlerts_YouCanChoosePeriodFrom"))+": ",1),Object(o["createElementVNode"])("ul",null,[Object(o["createElementVNode"])("li",null,"• "+Object(o["toDisplayString"])(e.translate("CustomAlerts_PeriodDayDescription")),1),Object(o["createElementVNode"])("li",null,"• "+Object(o["toDisplayString"])(e.translate("CustomAlerts_PeriodWeekDescription")),1),Object(o["createElementVNode"])("li",null,"• "+Object(o["toDisplayString"])(e.translate("CustomAlerts_PeriodMonthDescription")),1)])]),Object(o["createElementVNode"])("div",null,[Object(o["createVNode"])(i,{uicontrol:"select",name:"period","inline-help":"#customAlertPeriodHelp","model-value":e.actualAlert.period,"onUpdate:modelValue":t[2]||(t[2]=function(t){e.actualAlert.period=t,e.changeReport()}),title:e.translate("General_Period"),options:e.periodOptions},null,8,["model-value","title","options"])]),Object(o["createElementVNode"])("div",null,[Object(o["createVNode"])(i,{uicontrol:"checkbox",name:"report_email_me",modelValue:e.actualAlert.email_me,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.actualAlert.email_me=t}),introduction:e.translate("ScheduledReports_SendReportTo"),title:"".concat(e.translate("ScheduledReports_SentToMe")," (").concat(e.currentUserEmail,")")},null,8,["modelValue","introduction","title"])]),Object(o["createElementVNode"])("div",null,[Object(o["createVNode"])(i,{uicontrol:"textarea",modelValue:e.actualAlert.additional_emails,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.actualAlert.additional_emails=t}),"var-type":"array",title:e.translate("ScheduledReports_AlsoSendReportToTheseEmails")},null,8,["modelValue","title"])]),e.supportsSMS?(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",B,[Object(o["createVNode"])(c,{"phone-numbers":e.phoneNumbers||[],modelValue:e.actualAlert.phone_numbers,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.actualAlert.phone_numbers=t})},null,8,["phone-numbers","modelValue"])])):(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",T,[Object(o["createElementVNode"])("div",w,[Object(o["createVNode"])(u,{severity:"info"},{default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("strong",null,Object(o["toDisplayString"])(e.translate("MobileMessaging_PhoneNumbers")),1),R,Object(o["createElementVNode"])("span",{innerHTML:e.$sanitize(e.mobileMessagingNotActivated)},null,8,P)]})),_:1})])])),Object(o["createElementVNode"])("div",null,[Object(o["createVNode"])(i,{uicontrol:"expandable-select",name:"report","model-value":e.actualAlert.report,"onUpdate:modelValue":t[6]||(t[6]=function(t){e.actualAlert.report=t,e.changeReport()}),options:e.reportOptions,title:"".concat(e.translate("CustomAlerts_ThisAppliesTo"),": ").concat(null===(n=e.actualReportMetadata)||void 0===n?void 0:n.name),introduction:e.translate("CustomAlerts_AlertCondition")},null,8,["model-value","options","title","introduction"])]),Object(o["withDirectives"])(Object(o["createElementVNode"])("div",L,[Object(o["createElementVNode"])("div",U,[Object(o["createVNode"])(s,{loading:e.isLoadingReport},null,8,["loading"])])],512),[[o["vShow"],e.isLoadingReport]]),Object(o["withDirectives"])(Object(o["createElementVNode"])("div",q,[Object(o["createElementVNode"])("div",H,[Object(o["createElementVNode"])("div",null,[Object(o["createVNode"])(i,{uicontrol:"select",name:"reportCondition",modelValue:e.actualAlert.report_condition,"onUpdate:modelValue":t[7]||(t[7]=function(t){return e.actualAlert.report_condition=t}),"full-width":!0,title:e.reportConditionTitle,options:e.alertGroupConditions},null,8,["modelValue","title","options"])])]),Object(o["createElementVNode"])("div",I,[Object(o["createElementVNode"])("div",G,[Object(o["withDirectives"])(Object(o["createVNode"])(i,{uicontrol:"text",role:"textbox",name:"reportValue",modelValue:e.actualAlert.report_matched,"onUpdate:modelValue":t[8]||(t[8]=function(t){return e.actualAlert.report_matched=t}),"full-width":!0,autocomplete:!1,maxlength:255,title:e.translate("General_Value")},null,8,["modelValue","title"]),[[o["vShow"],"matches_any"!==e.actualAlert.report_condition]])],512)])],512),[[o["vShow"],e.hasReportDimension]]),Object(o["createElementVNode"])("div",null,[Object(o["createVNode"])(i,{uicontrol:"select",name:"metric","model-value":e.actualAlert.metric,"onUpdate:modelValue":t[9]||(t[9]=function(t){return e.actualAlert.metric=t}),options:e.metricOptions,introduction:e.translate("CustomAlerts_AlertMeWhen")},null,8,["model-value","options","introduction"])]),Object(o["createElementVNode"])("div",F,[Object(o["createElementVNode"])("div",$,[Object(o["createElementVNode"])("div",null,[Object(o["createVNode"])(i,{uicontrol:"select",name:"metricCondition","model-value":e.actualAlert.metric_condition,"onUpdate:modelValue":t[10]||(t[10]=function(t){return e.actualAlert.metric_condition=t}),"full-width":!0,options:e.metricConditionOptions},null,8,["model-value","options"])])]),Object(o["createElementVNode"])("div",W,[Object(o["createElementVNode"])("div",null,[Object(o["createVNode"])(i,{uicontrol:"text",name:"metricValue",class:Object(o["normalizeClass"])({invalid:e.isMetricValueInvalid}),modelValue:e.actualAlert.metric_matched,"onUpdate:modelValue":t[11]||(t[11]=function(t){return e.actualAlert.metric_matched=t}),title:"<span>".concat(e.metricDescription,"</span>"),"full-width":!0},null,8,["class","modelValue","title"])])])]),(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(e.comparablesDates,(function(t,r){return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",{key:r},[Object(o["withDirectives"])(Object(o["createVNode"])(i,{uicontrol:"select",name:"compared_to",modelValue:e.comparedTo[r],"onUpdate:modelValue":function(t){return e.comparedTo[r]=t},disabled:Object.keys(t).length<=1,options:t,introduction:e.translate("CustomAlerts_ComparedToThe")},null,8,["modelValue","onUpdate:modelValue","disabled","options","introduction"]),[[o["vShow"],r===e.actualAlert.period&&e.isComparable]])])})),128)),null!==(l=e.actualAlert)&&void 0!==l&&l.idalert?(Object(o["openBlock"])(),Object(o["createBlock"])(d,{key:2,onClick:t[12]||(t[12]=function(t){return e.updateAlert(e.actualAlert.idalert)}),saving:e.isLoading},null,8,["saving"])):(Object(o["openBlock"])(),Object(o["createBlock"])(d,{key:3,onClick:t[13]||(t[13]=function(t){return e.createAlert()}),saving:e.isLoading},null,8,["saving"])),Object(o["createElementVNode"])("div",{class:"entityCancel",innerHTML:e.$sanitize(e.cancelLink)},null,8,z)],512),[[p]])]})),_:1},8,["content-title"])}var J=r("a5a2");function K(e,t){return te(e)||ee(e,t)||X(e,t)||Q()}function Q(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function X(e,t){if(e){if("string"===typeof e)return Z(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Z(e,t):void 0}}function Z(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ee(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,l,o=[],a=!0,i=!1;try{for(r=r.call(e);!(a=(n=r.next()).done);a=!0)if(o.push(n.value),t&&o.length===t)break}catch(c){i=!0,l=c}finally{try{a||null==r["return"]||r["return"]()}finally{if(i)throw l}}return o}}function te(e){if(Array.isArray(e))return e}var re=Object(M["useExternalPluginComponent"])("MobileMessaging","SelectPhoneNumbers");function ne(e){return"MultiSites_getOne"===e||"MultiSites_getAll"===e}var le=window,oe=le.$,ae=Object(o["defineComponent"])({props:{alert:Object,headline:{type:String,required:!0},currentSite:{type:Object,required:!0},periodOptions:{type:Array,required:!0},currentUserEmail:{type:String,required:!0},supportsSMS:Boolean,phoneNumbers:[Array,Object],reportMetadata:Object,alertGroupConditions:{type:Array,required:!0},metricConditionOptions:{type:Array,required:!0},comparablesDates:{type:Object,required:!0}},components:{Field:J["Field"],Alert:M["Alert"],ActivityIndicator:M["ActivityIndicator"],SaveButton:J["SaveButton"],SelectPhoneNumbers:re,ContentBlock:M["ContentBlock"]},directives:{Form:J["Form"]},data:function(){var e=this.currentSite,t=this.alert,r=this.reportMetadata,n=Object.fromEntries(Object.entries(this.comparablesDates).map((function(e){var t,r=K(e,2),n=r[0],l=r[1];return[n,null===l||void 0===l||null===(t=l[0])||void 0===t?void 0:t.key]})));return this.alert&&(n[this.alert.period]="".concat(t.compared_to)),{isLoading:!1,isLoadingReport:!1,showReportConditionField:!1,reportOptions:[],actualReportMetadata:r,reportValuesAutoComplete:null,actualAlert:t?Object.assign({},t):{period:"day",id_sites:[(null===e||void 0===e?void 0:e.id)||M["Matomo"].idSite]},comparedTo:n,actualCurrentSite:{id:e.id,name:M["Matomo"].helper.htmlDecode(e.name)}}},watch:{actualReportMetadata:function(){var e,t=null===(e=this.actualReportMetadata)||void 0===e?void 0:e.metrics;if(t&&(!this.actualAlert.metric||!t[this.actualAlert.metric])){var r=Object.keys(t),n=K(r,1);this.actualAlert.metric=n[0]}},isMetricValueInvalid:function(e){if(e){var t=M["NotificationsStore"].show({message:Object(M["translate"])("CustomAlerts_InvalidMetricValue"),id:"CustomAlertsMetricValueError",context:"error",type:"toast"});M["NotificationsStore"].scrollToNotification(t)}}},created:function(){var e=this;this.changeReport(),setTimeout((function(){oe(e.$refs.reportValue).find("input").autocomplete({source:e.getValuesForReportAndMetric.bind(e),minLength:1,delay:300})}),1e3)},methods:{renderForm:function(e){var t=this,r=[];this.actualReportMetadata=null,e.forEach((function(e){var n=e.uniqueId;ne(n)||(t.actualAlert.report||(t.actualAlert.report=n),r.push({key:n,value:e.name,group:e.category}),n===t.actualAlert.report&&(t.actualReportMetadata=e))})),this.reportOptions=r},sendApiRequest:function(e,t){var r=this;this.isLoading=!0;var n=this.actualAlert.period;M["AjaxHelper"].post({period:n,method:e},t).then((function(){M["Matomo"].helper.redirect({module:"CustomAlerts",action:"index"})})).finally((function(){r.isLoading=!1}))},getValuesForReportAndMetric:function(e,t){var r,n=this,l=this.actualAlert.metric;function o(r){var n=new RegExp(oe.ui.autocomplete.escapeRegex(e.term),"i");t(oe.grep(r,(function(e){return!!e&&n.test(e.label||e.value||e[l]||e)})))}if(this.reportValuesAutoComplete)o(this.reportValuesAutoComplete);else{this.reportValuesAutoComplete=[];var a=this.actualReportMetadata;if(a){var i=a.module,c=a.action;l&&i&&c||o(this.reportValuesAutoComplete),M["AjaxHelper"].fetch({method:"API.getProcessedReport",date:"yesterday",period:"month",disable_queued_filters:1,flat:1,filter_limit:-1,showColumns:l,language:"en",apiModule:i,apiAction:c,idSite:null===(r=this.actualAlert.id_sites)||void 0===r?void 0:r[0],format:"JSON"}).then((function(e){null!==e&&void 0!==e&&e.reportData?(n.reportValuesAutoComplete=e.reportData,o(e.reportData)):o([])})).catch((function(){o([])}))}}},changeReport:function(){var e=this;this.isLoadingReport=!0,this.reportValuesAutoComplete=null,M["AjaxHelper"].fetch({method:"API.getReportMetadata",date:M["Matomo"].currentDateString,period:this.actualAlert.period,idSites:this.actualAlert.id_sites,filter_limit:"-1"}).then((function(t){e.renderForm(t)})).finally((function(){e.isLoadingReport=!1}))},createAlert:function(){return!this.isMetricValueInvalid&&(this.sendApiRequest("CustomAlerts.addAlert",this.apiParameters),!0)},updateAlert:function(){return!this.isMetricValueInvalid&&(this.sendApiRequest("CustomAlerts.editAlert",this.apiParameters),!0)}},computed:{apiParameters:function(){var e,t;return{idAlert:this.actualAlert.idalert,format:"json",name:this.actualAlert.name,metric:this.actualAlert.metric,metricCondition:this.actualAlert.metric_condition,metricValue:this.actualAlert.metric_matched,emailMe:this.actualAlert.email_me?1:0,additionalEmails:null!==(e=this.actualAlert.additional_emails)&&void 0!==e&&e.length?this.actualAlert.additional_emails:[""],phoneNumbers:null!==(t=this.actualAlert.phone_numbers)&&void 0!==t&&t.length?this.actualAlert.phone_numbers:[""],reportUniqueId:this.actualAlert.report,reportCondition:this.actualAlert.report_condition,reportValue:this.actualAlert.report_matched,idSites:this.actualAlert.id_sites,comparedTo:this.comparedTo[this.actualAlert.period]}},isMetricValueInvalid:function(){return!oe.isNumeric(this.actualAlert.metric_matched)},mobileMessagingNotActivated:function(){var e="?".concat(M["MatomoUrl"].stringify(Object.assign(Object.assign({},M["MatomoUrl"].urlParsed.value),{},{module:"CorePluginsAdmin",action:"plugins",updated:null})));return Object(M["translate"])("CustomAlerts_MobileMessagingPluginNotActivated",'<a href="'.concat(e,'#MobileMessaging">'),"</a>")},cancelLink:function(){var e="?".concat(M["MatomoUrl"].stringify(Object.assign(Object.assign({},M["MatomoUrl"].urlParsed.value),{},{module:"CustomAlerts",action:"index"})));return Object(M["translate"])("General_OrCancel",'<a class="entityCancelLink" href="'.concat(e,'">'),"</a>")},metricOptions:function(){var e;return Object.entries((null===(e=this.actualReportMetadata)||void 0===e?void 0:e.metrics)||{}).map((function(e){var t=K(e,2),r=t[0],n=t[1];return{key:r,value:n}}))},hasReportDimension:function(){var e;return!(null===(e=this.actualReportMetadata)||void 0===e||!e.dimension)},reportConditionTitle:function(){var e,t=null===(e=this.actualReportMetadata)||void 0===e?void 0:e.dimension;return"".concat(Object(M["translate"])("CustomAlerts_When")," <span>").concat(t,"</span>")},isComparable:function(){var e=this.actualAlert.metric_condition;return!!e&&-1!==e.indexOf("_more_than")},metricDescription:function(){var e=this.actualAlert.metric_condition,t=this.actualAlert.metric,r=e&&0===e.indexOf("percentage_"),n=t&&-1!==t.indexOf("_rate"),l=t&&-1!==t.indexOf("_time_");return r||n?"%":l?"s":Object(M["translate"])("General_Value")}}});ae.render=Y;var ie=ae,ce=["innerHTML"],ue={class:"tableActionBar"},se=["href"],de=Object(o["createElementVNode"])("span",{class:"icon-table"},null,-1);function me(e,t,r,n,l,a){var i=Object(o["resolveComponent"])("ContentBlock");return Object(o["openBlock"])(),Object(o["createBlock"])(i,{class:"alerts","content-title":e.translate("CustomAlerts_AlertsHistory")},{default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("div",{innerHTML:e.$sanitize(e.alertsFormatted)},null,8,ce),Object(o["createElementVNode"])("div",ue,[Object(o["createElementVNode"])("a",{href:e.customAlertsIndexLink},[de,Object(o["createTextVNode"])(" "+Object(o["toDisplayString"])(e.translate("CustomAlerts_ManageAlerts")),1)],8,se)])]})),_:1},8,["content-title"])}var pe=Object(o["defineComponent"])({props:{alertsFormatted:{type:String,required:!0}},components:{ContentBlock:M["ContentBlock"]},computed:{customAlertsIndexLink:function(){return"?".concat(M["MatomoUrl"].stringify(Object.assign(Object.assign({},M["MatomoUrl"].urlParsed.value),{},{module:"CustomAlerts",action:"index"})))}}});pe.render=me;var be=pe,Oe={class:"ui-confirm",id:"confirm"},je=["value"],fe=["value"];function he(e,t,r,n,l,a){var i=Object(o["resolveComponent"])("ListAlerts"),c=Object(o["resolveComponent"])("ContentBlock");return Object(o["openBlock"])(),Object(o["createBlock"])(c,{class:"alerts","content-title":e.title},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(i,{alerts:e.alerts},null,8,["alerts"]),Object(o["createElementVNode"])("div",Oe,[Object(o["createElementVNode"])("h2",null,Object(o["toDisplayString"])(e.translate("CustomAlerts_AreYouSureDeleteAlert")),1),Object(o["createElementVNode"])("input",{role:"yes",type:"button",value:e.translate("General_Yes")},null,8,je),Object(o["createElementVNode"])("input",{role:"no",type:"button",value:e.translate("General_No")},null,8,fe)])]})),_:1},8,["content-title"])}var ve=Object(o["defineComponent"])({props:{title:{type:String,required:!0},alerts:{type:Array,default:function(){return[]}}},components:{ContentBlock:M["ContentBlock"],ListAlerts:x}});ve.render=he;var Ae=ve;
/*!
 * Matomo - free/libre analytics platform
 *
 * @link https://matomo.org
 * @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later
 */}})}));
//# sourceMappingURL=CustomAlerts.umd.min.js.map